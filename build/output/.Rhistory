faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
View(basededados)
baseproporcao <- baseproporcao %>%
group_by(Ano) %>%
summarise(pop = mean(pop),
rendapctotal = mean(rendapctotal),
renda1rico = mean(renda1rico),
renda5rico = mean(renda5rico),
renda10rico = mean(renda10rico),
renda50seguinte = mean(renda50seguinte),
renda40pobre = mean(renda40pobre),
renda50pobre = mean(renda50pobre))
View(baseproporcao)
item1 <- basededados %>%
group_by(Ano) %>%
mutate(aux1 = sum(rendpc),
aux2 = sum(populacao),
rendapc = (aux1/aux2)) %>%
summarise(rendapc = mean(rendapc))
windowsFonts(Times=windowsFont("Times New Roman"))
Figura1 <- ggplot(data = item1, aes(Ano, rendapc)) +
geom_line(color = "gray20") +
geom_point(shape = 21, color = "black", fill = "indianred1", size = 3) +
geom_vline(xintercept = item1$Ano[4], linetype = 8) +
theme_bw() +
labs(x = "Ano",
y = "Em %")
View(item1)
plot(Figura1)
View(Figura1)
View(item1)
basededados2 <- basededados %>%
group_by(Ano) %>%
summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
View(basededados2)
View(basededados)
user <- Sys.info()[["user"]]
message(sprintf("Current User: %s\n"))
if (user == "rebec") {
ROOT <- "C:/Users/rebec/Desktop/Monografia/Monografia"
} else if (user == "f.cavalcanti") {
ROOT <- "C:/Users/Francisco/Dropbox"
} else {
stop("Invalid user")
}
home_dir <- file.path(ROOT, "analysis")
in_dir <- file.path(ROOT, "build", "output")
out_dir <- file.path(ROOT, "analysis", "output")
tmp_dir <- file.path(ROOT, "analysis", "tmp")
code_dir <- file.path(ROOT, "analysis", "code")
lista_visita <- c("2016_visita1",
"2016_visita5",
"2017_visita1",
"2017_visita5",
"2018_visita1",
"2018_visita5",
"2019_visita1",
"2019_visita5")
basededados <- data.frame(UF = character(), Ano = character())
baseproporcao <- data.frame(Ano = character())
basededados2 <- basededados %>%
group_by(Ano) %>%
summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
for (xx in lista_visita) {
setwd(in_dir)
db1 <- read.csv(paste0(in_dir, "/DadosVisitas", xx, ".csv"))
basededados <- rbind(basededados, db1)
}
for (xx in lista_visita) {
setwd(in_dir)
db2 <- read.csv(paste0(in_dir, "/DadosRenda", xx, ".csv"))
baseproporcao <- rbind(baseproporcao, db2)
}
basededados2 <- basededados %>%
group_by(Ano) %>%
summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
View(basededados)
View(basededados2)
user <- Sys.info()[["user"]]
message(sprintf("Current User: %s\n"))
if (user == "rebec") {
ROOT <- "C:/Users/rebec/Desktop/Monografia/Monografia"
} else if (user == "f.cavalcanti") {
ROOT <- "C:/Users/Francisco/Dropbox"
} else {
stop("Invalid user")
}
home_dir <- file.path(ROOT, "analysis")
in_dir <- file.path(ROOT, "build", "output")
out_dir <- file.path(ROOT, "analysis", "output")
tmp_dir <- file.path(ROOT, "analysis", "tmp")
code_dir <- file.path(ROOT, "analysis", "code")
lista_visita <- c("2016_visita1",
"2016_visita5",
"2017_visita1",
"2017_visita5",
"2018_visita1",
"2018_visita5",
"2019_visita1",
"2019_visita5")
basededados <- data.frame(UF = character(), Ano = character())
baseproporcao <- data.frame(Ano = character())
for (xx in lista_visita) {
setwd(in_dir)
db1 <- read.csv(paste0(in_dir, "/DadosVisitas", xx, ".csv"))
basededados <- rbind(basededados, db1)
}
for (xx in lista_visita) {
setwd(in_dir)
db2 <- read.csv(paste0(in_dir, "/DadosRenda", xx, ".csv"))
baseproporcao <- rbind(baseproporcao, db2)
}
View(baseproporcao)
baseproporcao <- baseproporcao %>%
group_by(Ano) %>%
summarise(pop = mean(pop),
rendapctotal = mean(rendapctotal),
renda1rico = mean(renda1rico),
renda5rico = mean(renda5rico),
renda10rico = mean(renda10rico),
renda50seguinte = mean(renda50seguinte),
renda40pobre = mean(renda40pobre),
renda50pobre = mean(renda50pobre))
View(baseproporcao)
View(basededados)
basededados1 <- basededados %>%
group_by(Ano) %>%
summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
View(basededados1)
basededados2 <- basededados %>%
group_by(Ano, UF) %>%
summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
?summarise
basededados2 <- basededados %>%
group_by(Ano, UF) %>%
summarise()
View(basededados2)
basededados2 <- basededados %>%
group_by(Ano, UF) %>%
summarise(summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
View(basededados2)
basededados2 <- basededados %>%
group_by(Ano, UF) %>%
summarise(populacao = mean(populacao),
rendtrabhabit.x = mean(rendtrabhabit.x),
rendtrabeft.x = mean(rendtrabeft.x),
rendtrabeft.y = mean(rendtrabeft.y),
rendpc = mean(rendpc),
rendpcnordeste = mean(rendpcnordeste),
rendpcnorte = mean(rendpcnorte),
rendpcsudeste = mean(rendpcsudeste),
rendpcsul = mean(rendpcsul),
rendpcentroeste = mean(rendpcentroeste),
faixa1rendhab = mean(faixa1rendhab),
faixa2rendhab = mean(faixa2rendhab),
faixa3rendhab = mean(faixa3rendhab),
faixa4rendhab = mean(faixa4rendhab),
faixa5rendhab = mean(faixa5rendhab),
faixa6rendhab = mean(faixa6rendhab),
faixa7rendhab = mean(faixa7rendhab),
faixa1rendeft = mean(faixa1rendeft),
faixa2rendeft = mean(faixa2rendeft),
faixa3rendeft = mean(faixa3rendeft),
faixa4rendeft = mean(faixa4rendeft),
faixa5rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa5rendeft),
faixa6rendeft = mean(faixa6rendeft),
faixa7endeft = mean(faixa7endeft),
BPC = mean(BPC),
BF = mean(BF),
PSocial = mean(PSocial),
Segdesemprego = mean(Segdesemprego),
Segdesempregonorte = mean(Segdesempregonorte),
Segdesempregonordeste = mean(Segdesempregonordeste),
Segdesempregosudeste = mean(Segdesempregosudeste),
Segdesempregosul = mean(Segdesempregosul),
Segdesempregocentrooeste = mean(Segdesempregocentrooeste),
Aposentadoria = mean(Aposentadoria),
Doacao = mean(Doacao),
Aluguel = mean(Aluguel),
GiniEfet = mean(GiniEfet),
GiniHab = mean(GiniHab))
View(basededados2)
basededados1 <- basededados2 %>%
group_by(Ano) %>%
summarise(populacao = sum(populacao),
rendtrabhabit.x = sum(rendtrabhabit.x),
rendtrabeft.x = sum(rendtrabeft.x),
rendtrabeft.y = sum(rendtrabeft.y),
rendpc = sum(rendpc),
rendpcnordeste = sum(rendpcnordeste),
rendpcnorte = sum(rendpcnorte),
rendpcsudeste = sum(rendpcsudeste),
rendpcsul = sum(rendpcsul),
rendpcentroeste = sum(rendpcentroeste),
faixa1rendhab = sum(faixa1rendhab),
faixa2rendhab = sum(faixa2rendhab),
faixa3rendhab = sum(faixa3rendhab),
faixa4rendhab = sum(faixa4rendhab),
faixa5rendhab = sum(faixa5rendhab),
faixa6rendhab = sum(faixa6rendhab),
faixa7rendhab = sum(faixa7rendhab),
faixa1rendeft = sum(faixa1rendeft),
faixa2rendeft = sum(faixa2rendeft),
faixa3rendeft = sum(faixa3rendeft),
faixa4rendeft = sum(faixa4rendeft),
faixa5rendeft = sum(faixa5rendeft),
faixa6rendeft = sum(faixa5rendeft),
faixa6rendeft = sum(faixa6rendeft),
faixa7endeft = sum(faixa7endeft),
BPC = sum(BPC),
BF = sum(BF),
PSocial = sum(PSocial),
Segdesemprego = sum(Segdesemprego),
Segdesempregonorte = sum(Segdesempregonorte),
Segdesempregonordeste = sum(Segdesempregonordeste),
Segdesempregosudeste = sum(Segdesempregosudeste),
Segdesempregosul = sum(Segdesempregosul),
Segdesempregocentrooeste = sum(Segdesempregocentrooeste),
Aposentadoria = sum(Aposentadoria),
Doacao = sum(Doacao),
Aluguel = sum(Aluguel),
GiniEfet = sum(GiniEfet),
GiniHab = sum(GiniHab))
View(basededados1)
item6 <- baseproporcao %>%
group_by(Ano) %>%
mutate(aux1 = sum(renda1rico),
aux2 = sum(renda5rico),
aux3 = sum(renda10rico),
aux4 = sum(renda50seguinte),
aux5 = sum(renda40pobre),
aux6 = sum(renda50pobre),
aux7 = sum(rendapctotal),
rico1 = (aux1/aux7)*100,
rico5 = (aux2/aux7)*100,
rico10 = (aux3/aux7)*100,
seguinte50 = (aux4/aux7)*100,
pobre40 = (aux5/aux7)*100,
pobre50 = (aux6/aux7)*100) %>%
summarise(rico1 = mean(rico1),
rico5 = mean(rico5),
rico10 = mean(rico10),
seguinte50 = mean(seguinte50),
pobre40 = mean(pobre40),
pobre50 = mean(pobre50))
Figura6 <- ggplot(item6, aes(x = Ano)) +
geom_bar(aes(y = rico1, color = "1% mais rico"), stat = "identity", width = .15, fill = "darksalmon" , position = position_nudge(x = .0)) +
geom_bar(aes(y = rico5, color = "5% mais ricos"), stat = "identity", width = .15, fill = "black", position = position_nudge(x = .15)) +
geom_bar(aes(y = rico10, color = "10% mais ricos"), stat = "identity", width = .15, fill = "orangered4" ,position = position_nudge(x = .3) ) +
geom_bar(aes(y = seguinte50, color = "50% seguintes" ), stat = "identity", width = .15, fill = "tan4", position = position_nudge(x = .45)) +
theme_bw() +
scale_color_manual(values = c("darksalmon", "black", "tan4", "orangered4")) +
scale_fill_manual(values = c("rico1" = "darksalmon", "black", "orangered4","50% seguintes")) +
labs(x = "Ano",
y = "Em %",
color = "") +
theme(legend.position = 'bottom')
plot(Figura6)
View(Figura6)
plot(Figura6)
